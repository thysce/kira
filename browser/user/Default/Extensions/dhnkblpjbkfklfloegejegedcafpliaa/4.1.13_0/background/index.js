!function(e){var n={};function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)t.d(r,a,function(n){return e[n]}.bind(null,a));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=39)}({39:function(e,n,t){"use strict";t(40),t(44),t(45)},4:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="undefined"!=typeof browser?browser:chrome;n.browser=r},40:function(e,n,t){"use strict";var r=t(4),a=t(41);r.browser.runtime.onInstalled.addListener(function(e){switch(e.reason){case r.browser.runtime.OnInstalledReason.INSTALL:return void r.browser.tabs.create({active:!0,url:(0,a.linkGenerator)("autofill_settings_help")});default:return}})},41:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.linkGenerator=void 0;var r=t(42),a={autofill_settings_help:(0,r.buildURL)({pid:"kpmext",link:"online_help",helpid:180293})};n.linkGenerator=(0,r.linksGeneratorFactory)(a)},42:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.linksGeneratorFactory=n.buildURL=void 0;var r=t(43),a={version:r.PRODUCT_VERSION,hl:r.PRODUCT_LANGUAGE};n.buildURL=function(e){return r.INTERCEPTOR_DOMAIN+"?"+function(e){var n=Object.assign({},a,e);return Object.keys(n).map(function(e){return window.encodeURI(e)+"="+window.encodeURI(n[e])}).join("&")}(e)},n.linksGeneratorFactory=function(e){return function(n){if(n in e)return e[n];throw new Error("Couldn't find link for \""+n+'" identificator')}}},43:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.PRODUCT_LANGUAGE=n.PRODUCT_VERSION=n.INTERCEPTOR_DOMAIN=void 0;var r=t(4);n.INTERCEPTOR_DOMAIN="https://click.kaspersky.com/",n.PRODUCT_VERSION="9.0.2",n.PRODUCT_LANGUAGE=r.browser.i18n.getMessage("product_lang_code")},44:function(e,n,t){"use strict";var r=t(4);r.browser.runtime.onMessage.addListener(function(e,n,t){switch(e.name){case"open_settings:passwords":return r.browser.tabs.create({active:!0,url:"chrome://settings/passwords"}),!1;case"open_settings:cards":return r.browser.tabs.create({active:!0,url:"chrome://settings/payments"}),!1;case"open_settings:addresses":return r.browser.tabs.create({active:!0,url:"chrome://settings/autofill"}),!1}})},45:function(e,n,t){"use strict";var r=t(46);t(47),window.BackgroundObject={autoSignInStatus:{},unavailableUrls:{},isConnected:null,isVaultLocked:!0,isBackendSupported:!0,minSupportedBackendVersion:4,callbackNames:null,popoverData:{},isDataUpdating:!1,getHostNameByUrl:function(e){return e.match(/^https?\:\/\/([^\/:?#]+)(?:[\/:?#]|$)/i)[1]},getSignInStatus:function(e,n,t){var r=this[e][n];if(r){if(r[t=BackgroundObject.getHostNameByUrl(t)])return!0;var a=Object.keys(r),o=a[0];if(a.forEach(function(e){"www."===e.substr(0,4)&&(e=e.slice(4,e.length)),o.length>e.length&&(o=e)}),o="."+o,-1!==t.indexOf(o))return!0}return!1},updateSignInStatus:function(e,n,t,r){this[e][n]||(this[e][n]={}),this[e][n][BackgroundObject.getHostNameByUrl(t)]=r},clearDataForKey:function(e){delete BackgroundObject.autoSignInStatus[e],delete BackgroundObject.unavailableUrls[e]},updateToolbarButtonIcon:function(){!window.startStandaloneController||BackgroundObject.isConnected?BackgroundObject.isBackendSupported?BackgroundObject.isVaultLocked?backgroundHelper.setLockedToolbarButtonIcon():backgroundHelper.setUnlockedToolbarButtonIcon():backgroundHelper.setUninstalledToolbarButtonIcon():backgroundHelper.setUnlockedToolbarButtonIcon()},updatePopoverData:function(e){BackgroundObject.isVaultLocked||Promise.all(a.map(o)).then(function(n){BackgroundObject.popoverData=Object.assign.apply(Object,[{}].concat(function(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}(n.map(r.recoverData)))),e&&e()},function(e){return console.error("KPM error getting entities")})},updateEntity:function(e){BackgroundObject.isVaultLocked||o(e).then(function(e){Object.assign(BackgroundObject.popoverData,(0,r.recoverData)(e)),BackgroundObject.notifyPopoverAboutNewData()},function(n){return console.error("KPM error getting "+e+" entity")})},callPlugin:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;backgroundHelper.callNativeMessaging(r,{name:e,message:n,frameId:"topFrame"},t)},updateVaultStatus:function(e){BackgroundObject.callPlugin("kpm_isVaultLocked",null,function(n){BackgroundObject.isVaultLocked=n,BackgroundObject.updateToolbarButtonIcon(),BackgroundObject.callbackNames||pageLoaded(),BackgroundObject.isVaultLocked?backgroundHelper.dispatchToPopover("kpm_lockPlugin"):!e&&BackgroundObject.callbackNames&&BackgroundObject.updatePopoverData(BackgroundObject.notifyPopoverAboutNewData)})},notifyPopoverAboutNewData:function(){backgroundHelper.dispatchToPopover("kpm_popoverData")},stopDataUpdating:function(){BackgroundObject.isDataUpdating=!0,setTimeout(function(){BackgroundObject.isDataUpdating=!1},1e4)}},window.backgroundHelper=new BackgroundHelper;var a=["getWebAccounts","getRecentWebAccounts","getBankCards","getAddresses"];function o(e){return new Promise(function(n){BackgroundObject.callPlugin(BackgroundObject.callbackNames[e],["background.page"],function(e){n(JSON.parse(e))})})}window.pageLoaded=function(){BackgroundObject.callPlugin("kpm_pageLoaded",["background.page"],function(e){e=JSON.parse(e),BackgroundObject.isVaultLocked=e.isVaultLocked,BackgroundObject.callbackNames=e.callbackNames,BackgroundObject.isBackendSupported=e.backendVersion>=BackgroundObject.minSupportedBackendVersion,BackgroundObject.isConnected=!0,BackgroundObject.updateToolbarButtonIcon(),BackgroundObject.updatePopoverData(BackgroundObject.notifyPopoverAboutNewData)})},backgroundHelper.isSupportedBrowserVersion?(BackgroundObject.callPlugin("kpm_launch",["background.page"],function(){}),backgroundHelper.browserInfo.name!==backgroundHelper.browsers.EDGE?pageLoaded():setTimeout(pageLoaded,1e3),backgroundHelper.setUpEventListeners(null,function(e,n,t){switch(e.name){case"kpm_chrome_native_message":e.message&&n.tab&&backgroundHelper.callNativeMessaging(n.tab.id,e.message,t);break;case"kpm_autoSignIn":BackgroundObject.updateSignInStatus("autoSignInStatus",n.tab.id,n.url,e.message.wasAutoSignIn);break;case"kpm_getSiteMarkup":backgroundHelper.dispatchToTab(n.tab.id,e.name);break;case"kpm_autoSignInStatus":var r=!1;n&&(r=BackgroundObject.getSignInStatus("autoSignInStatus",n.tab.id,n.url)),t?t(r):backgroundHelper.dispatchToActiveTab("kpm_autoSignInStatus_response",r,n)}return!0},null),backgroundHelper.addTabOpenEventListener(BackgroundObject.updateToolbarButtonIcon),backgroundHelper.addPageClosedEventListener(BackgroundObject.clearDataForKey),backgroundHelper.addPageErrorOccurredEventListener(function(e,n){BackgroundObject.unavailableUrls[n]||(BackgroundObject.unavailableUrls[n]={}),BackgroundObject.unavailableUrls[n][e]=!0,backgroundHelper.dispatchToPopover("kpm_pageErrorOccurred")})):backgroundHelper.setUninstalledToolbarButtonIcon(),(window.browser||window.chrome).runtime.onMessage.addListener(function(e,n,t){return"is-connected"===e.type&&(t(!!BackgroundObject.isConnected),!0)})},46:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.recoverData=function(e){return["addresses","bankCards","recentWebAccounts","webSites"].reduce(function(n,t){return t in e?Object.assign(n,function(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}({},t,e[t]?e[t]:[])):n},{})}},47:function(e,n,t){"use strict";var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();t(48),t(50),window.BackgroundHelper=function(){function e(){var n;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.plugin=null,this.tabsUrl={},this.backgroundSpecific=new BackgroundSpecific,this.isSupportedBrowserVersion=-1===(n=navigator.userAgent.indexOf("Firefox"))||parseFloat(navigator.userAgent.substring(n+8))>=50,this.browserInfo=function(){for(var e=[["Safari",/Version\/([0-9\._]+).*Safari/],["Yandex",/YaBrowser\/([0-9\._]+)/],["FireFox",/Firefox\/([0-9\.]+)(?:\s|$)/],["Chrome",/Chrome\/([0-9\.]+)(:?\s|$)/],["Edge",/Edge\/([0-9\._]+)/]],n=e.length,t=void 0;n--;)if((t=e[n])[1].test(navigator.userAgent)){var r=t[1].exec(navigator.userAgent),a=r&&r[1].split(/[._]/).slice(0,3);return a&&a.length<3&&Array.prototype.push.apply(a,1===a.length?[0,0]:[0]),{name:t[0],version:a.join(".")}}return{name:"unknown",version:"unknown"}}(),this.browsers={CHROME:"Chrome",EDGE:"Edge",UNKNOWN:"unknown"},this._connectNM()}return r(e,[{key:"_getIcon",value:function(e){return{19:"./../icons/"+e+"19.png",20:"./../icons/"+e+"20.png",38:"./../icons/"+e+"38.png",40:"./../icons/"+e+"40.png"}}},{key:"_connectNM",value:function(){var e=this;try{e.plugin=new KasperskyNativeMessagingClient(function(){console.error("KasperskyNativeMessagingClient OnDisconnect"),!1!==BackgroundObject.isConnected?(BackgroundObject.isBackendSupported=!1,BackgroundObject.updateToolbarButtonIcon(),BackgroundObject.isConnected=!1,e._connectNM(),window.startStandaloneController||setTimeout(pageLoaded,1e3)):window.startStandaloneController&&window.startStandaloneController()}),e.plugin.registerMethod("eval",function(n){var t=n[1];if("0-topFrame"===n[0])t.length<150&&(t.includes('"kpm_vaultStatusChanged"')?BackgroundObject.updateVaultStatus():t.includes('"kpm_addressChanged"')?BackgroundObject.updateEntity("getAddresses"):t.includes('"kpm_bankCardChanged"')?BackgroundObject.updateEntity("getBankCards"):t.includes('"kpm_webAccountChanged"')?BackgroundObject.updateEntity("getWebAccounts"):t.includes('"kpm_recentWebAccountChanged"')&&BackgroundObject.updateEntity("getRecentWebAccounts"));else if(t.length>150||!t.includes('"kpm_webAccountChanged"')||!t.includes('"kpm_recentWebAccountChanged"')){var r=n[0].split("-");e.dispatchToTab(parseInt(r[0]),"kpm_evalScript",{frameId:r[1],script:t})}})}catch(e){}}},{key:"addTabOpenEventListener",value:function(e){var n=this;n.backgroundSpecific.addTabOpenEventListener(function(t,r){t&&t.url&&(n.tabsUrl[r]=t.url,e())})}},{key:"addPageClosedEventListener",value:function(e){var n=this;n.backgroundSpecific.addPageClosedEventListener(function(t){n.tabsUrl[t]&&(e(t),n.callNativeMessaging(t,{name:"kpm_pageClosed",frameId:"topFrame"}),delete n.tabsUrl[t])})}},{key:"addPageErrorOccurredEventListener",value:function(e){this.backgroundSpecific.addPageErrorOccurredEventListener(function(n){"net::ERR_NAME_NOT_RESOLVED"!==n.error&&"net::ERR_NAME_RESOLUTION_FAILED"!==n.error&&"net::ERR_INTERNET_DISCONNECTED"!==n.error||e(n.url,n.tabId)},{urls:["http://*/*","https://*/*"]})}},{key:"dispatchToPopover",value:function(e,n,t){this.backgroundSpecific.dispatchMessage(e,n,t)}},{key:"setUpEventListeners",value:function(e,n){this.backgroundSpecific.setUpEventListeners(e,n)}},{key:"dispatchToTab",value:function(e,n,t){this.backgroundSpecific.dispatchToTab(e,n,t)}},{key:"dispatchToActiveTab",value:function(e,n){this.backgroundSpecific.dispatchToActiveTab(e,n)}},{key:"callNativeMessaging",value:function(e,n,t){if(!1!==BackgroundObject.isConnected){var r=[e+"-"+n.frameId];n.message&&(r=r.concat(n.message));try{this.plugin.call(n.name,r,function(e){return t.apply(void 0,function(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}(e))},function(){return console.error("Call "+n.name+" failed!!!, args: "+r)})}catch(e){BackgroundObject.isConnected=!1,console.error(e)}}}},{key:"setUnlockedToolbarButtonIcon",value:function(){this.backgroundSpecific.setToolbarButtonIcon(this._getIcon("kpm_unlocked_toolbar_icon"))}},{key:"setLockedToolbarButtonIcon",value:function(){this.backgroundSpecific.setToolbarButtonIcon(this._getIcon("kpm_locked_toolbar_icon"))}},{key:"setUninstalledToolbarButtonIcon",value:function(){this.backgroundSpecific.setToolbarButtonIcon(this._getIcon("kpm_warning_toolbar_icon"))}},{key:"getBrowserInfo",value:function(){return this.browserInfo.name===this.browsers.UNKNOWN?this.browsers.UNKNOWN:this.browserInfo.name+" "+this.browserInfo.version}},{key:"verifyCurrentUrl",value:function(e){var n=this;n.backgroundSpecific.getActiveTabInfo(function(t,r){return e(n.checkIsUrlAvailable(t,r))})}},{key:"getCurrentTabInfo",value:function(e){this.backgroundSpecific.getActiveTabInfo(e)}},{key:"checkIsUrlAvailable",value:function(e,n){var t=void 0;return!(n&&(t=BackgroundObject.unavailableUrls[n])&&t[e])&&((this.browserInfo.name!==this.browsers.CHROME||!e.startsWith("https://chrome.google.com/webstore"))&&((this.browserInfo.name!==this.browsers.EDGE||!e.startsWith("https://www.msn.com/spartan/"))&&!/^(chrome|about|file):/i.test(e)))}}]),e}()},48:function(e,n,t){"use strict";var r=t(4),a=t(49);window.KasperskyNativeMessagingClient=function(e){var n=this;n.m_methods={},n.m_calls={},n.m_uniqueCommandId=0,n.m_isConnected=!0,n.m_nativeHost=r.browser.runtime.connectNative("com.nm.kpm"),n.m_nativeHost.onMessage.addListener(function(e){if("string"==typeof e){if(""===e)return;e=JSON.parse(e)}var t=parseInt(e[1]);switch(parseInt(e[0])){case a.MSG_CALL:n.processCommandCall(t,e[2],e.slice(3));break;case a.MSG_CALL_RESULT:n.processCommandCallResult(t,e.slice(2));break;case a.MSG_CALL_ERROR:n.processCommandCallError(t,parseInt(e[2]));break;default:n.printException("Unknown message type")}}),n.m_nativeHost.onDisconnect.addListener(function(){r.browser.runtime.lastError&&console.error(r.browser.runtime.lastError);try{n.m_isConnected=!1,e(),n.callbackAllPendingOperations(-1)}catch(e){n.printException(e)}}),n.registerMethod=function(e,t){n.m_methods[e]||(n.m_methods[e]=t)},n.call=function(e,t,r,a){if(n.m_isConnected){var o=n.createCommandCall(e,t);n.m_calls[o.id]={callbackResult:r,callbackError:a},n.m_nativeHost.postMessage(o.payload)}else BackgroundObject.isConnected=!1,console.error("NM Sending message failed because of disconnecting")},n.createCommandCall=function(e,t){var r=n.createUniqueCommandId();return{id:r,payload:[a.MSG_CALL,r,e].concat(t)}},n.createCommandCallResult=function(e,n){return{id:e,payload:[a.MSG_CALL_RESULT,e].concat(n)}},n.createCommandCallError=function(e,n){return{id:e,payload:[a.MSG_CALL_ERROR,e,n]}},n.createUniqueCommandId=function(){return n.m_uniqueCommandId++},n.processCommandCall=function(e,t,r){try{n.m_methods[t](r,function(t){var r=n.createCommandCallResult(e,t);n.m_nativeHost.postMessage(r.payload)})}catch(t){n.printException(t);var a=n.createCommandCallError(e,-1);n.m_nativeHost.postMessage(a.payload)}},n.close=function(){n.m_nativeHost.disconnect()},n.processCommandCallResult=function(e,t){try{n.m_calls[e]&&n.m_calls[e].callbackResult?(n.m_calls[e].callbackResult(t),delete n.m_calls[e]):n.printException("Not found resultCallback for callId: "+e)}catch(e){n.printException(e)}},n.processCommandCallError=function(e,t){try{n.m_calls[e]&&n.m_calls[e].callbackError?(n.m_calls[e].callbackError(t),delete n.m_calls[e]):n.printException("Not found errorCallback for callId: "+e)}catch(e){n.printException(e)}},n.printException=function(e){var n="NM exception: "+e;e.stack&&(n=n+"\nstack:"+e.stack),console.error(n)},n.callbackAllPendingOperations=function(e){Object.keys(n.m_calls).forEach(function(t){return n.m_calls[t].callbackError(e)}),n.m_calls={}}}},49:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.MSG_CALL=1,n.MSG_CALL_RESULT=2,n.MSG_CALL_ERROR=3},50:function(e,n,t){"use strict";var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();window.BackgroundSpecific=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.browser=window.browser||window.chrome}return r(e,[{key:"getActiveTabInfo",value:function(e){this.browser.tabs.query({currentWindow:!0,active:!0},function(n){n&&n.length>0&&(n=n[0],e(n.url,n.id))})}},{key:"addTabOpenEventListener",value:function(e){var n=this.browser;n.tabs.onUpdated.addListener(function(n,t,r){e(r,n)}),n.tabs.onActivated.addListener(function(t){n.tabs.get(t.tabId,function(n){e(n,t.tabId)})})}},{key:"addPageClosedEventListener",value:function(e){this.browser.tabs.onRemoved.addListener(e)}},{key:"addPageErrorOccurredEventListener",value:function(e,n){this.browser.webRequest.onErrorOccurred.addListener(e,n)}},{key:"dispatchMessage",value:function(e,n,t){this.browser.runtime.sendMessage({type:"background-message",name:e,message:n},t)}},{key:"setUpEventListeners",value:function(e,n){this.browser.runtime.onMessage.addListener(n)}},{key:"dispatchToTab",value:function(e,n,t){this.browser.tabs.sendMessage(e,{event:"message",name:n,message:t})}},{key:"dispatchToActiveTab",value:function(e,n){var t=this;n&&n.tabId?t.dispatchToTab(n.tabId,e,n):t.browser.tabs.query({active:!0,currentWindow:!0},function(r){r[0]&&t.dispatchToTab(r[0].id,e,n)})}},{key:"setToolbarButtonIcon",value:function(e){this.browser.browserAction.setIcon({path:e})}}]),e}()}});